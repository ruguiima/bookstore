* { box-sizing: border-box; }
:root {
  --bg: #0f172a;        /* slate-900 */
  --panel: #111827;     /* gray-900 */
  --muted: #94a3b8;     /* slate-400 */
  --text: #e5e7eb;      /* gray-200 */
  --brand: #3b82f6;     /* blue-500 */
  --brand-600: #2563eb; /* blue-600 */
  --accent: #22c55e;    /* green-500 */
  --danger: #ef4444;    /* red-500 */
  --border: #1f2937;    /* gray-800 */
  --card: #0b1220;      /* deep card */
  --shadow: 0 6px 30px rgba(0,0,0,.35);
}
html, body { height: 100%; }
body {
  margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text); background: radial-gradient(1200px 600px at 20% -10%, #0b1020 0%, transparent 60%),
                        radial-gradient(1000px 500px at 120% 10%, rgba(59,130,246,.15) 0%, transparent 60%),
                        linear-gradient(180deg, #0a0f1f 0%, #070b16 100%);
}
a { color: inherit; text-decoration: none; }

.header {
  position: sticky; top: 0; z-index: 20;
  display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center;
  padding: .9rem 1.2rem; border-bottom: 1px solid var(--border);
  background: rgba(7, 11, 22, .8); backdrop-filter: blur(10px);
}
.brand { display: inline-flex; align-items: center; gap: .55rem; font-weight: 700; }
.brand-logo { font-size: 1.4rem; }
.brand-name { letter-spacing: .5px; }

.search { display: flex; gap: .5rem; justify-content: center; }
.search input {
  width: min(680px, 62vw); padding: .65rem .8rem; border-radius: .6rem; border: 1px solid var(--border);
  background: #0b1120; color: var(--text); outline: none;
}
.search input:focus { border-color: #334155; box-shadow: inset 0 0 0 1px #334155; }
.search button { padding: .6rem .9rem; border-radius: .55rem; border: 1px solid #1d4ed8; background: var(--brand); color: white; cursor: pointer; }
.search button:hover { background: var(--brand-600); }

.header-actions { display: flex; justify-content: end; align-items: center; gap: .6rem; }
.cart { background: transparent; color: var(--text); border: 1px solid var(--border); padding: .5rem .7rem; border-radius: .6rem; cursor: pointer; }
.badge { margin-left: .35rem; padding: .08rem .35rem; border-radius: .5rem; background: var(--accent); color: #07121b; font-weight: 700; }
.link { color: #93c5fd; text-decoration: underline; text-underline-offset: 2px; }
.link:hover { color: #bfdbfe; }

.container { display: grid; grid-template-columns: 280px 1fr; gap: 1.2rem; width: min(1200px, 94vw); margin: 1.2rem auto; }

.filters { background: rgba(11, 17, 32, .7); border: 1px solid var(--border); border-radius: .8rem; padding: 1rem; box-shadow: var(--shadow); }
.filters h2 { margin: 0 0 .8rem; font-size: 1.05rem; }
.filters h3 { margin: .9rem 0 .5rem; font-size: .95rem; color: var(--muted); font-weight: 600; }
.checkbox-list { display: grid; gap: .35rem; max-height: 260px; overflow: auto; padding-right: .3rem; }
.checkbox-list label { display: flex; align-items: center; gap: .45rem; font-size: .95rem; }
.price-range { display: flex; gap: .4rem; align-items: center; }
.price-range input { width: 100%; padding: .5rem .6rem; border-radius: .5rem; border: 1px solid var(--border); background: #0b1120; color: var(--text); }
.price-range .sep { color: var(--muted); }
.btn-small { padding: .45rem .6rem; border-radius: .5rem; border: 1px solid #1d4ed8; background: var(--brand); color: white; cursor: pointer; }

.content { min-width: 0; }
.toolbar { display: flex; justify-content: space-between; align-items: center; background: rgba(11, 17, 32, .6); border: 1px solid var(--border); border-radius: .8rem; padding: .6rem .8rem; box-shadow: var(--shadow); }
.toolbar label { color: var(--muted); margin-right: .35rem; }
.toolbar select { background: #0b1120; border: 1px solid var(--border); color: var(--text); padding: .45rem .55rem; border-radius: .5rem; }
.result-meta { margin: .8rem 0; color: var(--muted); }

.grid { list-style: none; margin: 0; padding: 0; display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 1rem; }
.card { display: grid; grid-template-rows: auto 1fr auto; background: linear-gradient(180deg, rgba(15,23,42,.9) 0%, rgba(15,23,42,.7) 100%); border: 1px solid var(--border); border-radius: .9rem; overflow: hidden; box-shadow: var(--shadow); transition: transform .2s ease, box-shadow .2s ease; }
.card:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,.45); }
.cover-wrap { position: relative; padding-top: 140%; background: #0b1120; }
.cover { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; }
.card-body { padding: .75rem .8rem; display: grid; gap: .35rem; }
.title { font-size: 1rem; line-height: 1.3; margin: 0; }
.author { margin: 0; color: var(--muted); font-size: .9rem; }
.rating { color: #fbbf24; font-size: .9rem; }
.price { display: flex; align-items: center; gap: .5rem; margin: .3rem 0 0; font-weight: 700; }
.price s { color: var(--muted); font-weight: 400; }
.card-actions { display: grid; grid-template-columns: 1fr auto; gap: .5rem; padding: .7rem .8rem .9rem; }
.btn { padding: .55rem .75rem; border-radius: .55rem; border: 1px solid var(--border); background: #0b1120; color: var(--text); cursor: pointer; }
.btn-primary { padding: .55rem .75rem; border-radius: .55rem; border: 1px solid #16a34a; background: var(--accent); color: #07121b; font-weight: 700; cursor: pointer; }
.btn-primary:hover { filter: brightness(1.05); }

.pagination { display: flex; flex-wrap: wrap; gap: .5rem; margin: 1rem 0; }
.page-btn { padding: .48rem .75rem; border-radius: .5rem; border: 1px solid var(--border); background: #0b1120; color: var(--text); cursor: pointer; }
.page-btn[aria-current="page"] { border-color: var(--brand); box-shadow: inset 0 0 0 1px var(--brand); }

.dialog { border: none; border-radius: 1rem; padding: 0; width: min(900px, 92vw); background: transparent; }
.dialog::backdrop { background: rgba(2,6,23,.65); backdrop-filter: blur(2px); }
.dialog-content {
  display: grid; grid-template-columns: 38% 1fr; gap: 1rem;
  background: #0b1120; border: 1px solid var(--border); border-radius: 1rem; overflow: hidden;
  color: var(--text);
  align-items: stretch; /* 保证两列高度拉伸一致 */
  position: relative; /* 使绝对定位的关闭按钮相对本容器定位 */
}
.dialog-close {
  position: absolute;
  top: 10px;
  right: 10px;
  transform: none; /* 移除原先左上角位移 */
  background: transparent; border: 1px solid var(--border); color: var(--text);
  border-radius: .5rem; width: 2rem; height: 2rem; cursor: pointer;
}
.dialog-body { position: relative; display: contents; }
.dialog-info {
  padding: 1rem; display: grid; align-content: start; gap: .5rem;
}
.dialog-info h3,
.dialog-info p,
.dialog-info .price,
.dialog-info .desc { color: var(--text); }
.dialog-info .muted { color: var(--muted); }

/* 评分文本颜色（星星为金色，数值为浅色） */
#detailRating { color: #fbbf24; }
#detailRating .muted { color: var(--muted); }

/* 价格样式：现价浅色、原价淡色 */
#detailPrice { color: var(--text); }
#detailOrigin { color: var(--muted); }

/* 关闭按钮与弹窗操作按钮颜色对比提升 */
.dialog-close { color: var(--text); border-color: var(--border); background: rgba(0,0,0,.2); }
#detailAdd { color: #07121b; background: var(--accent); border-color: #16a34a; }
#detailAdd:hover { filter: brightness(1.06); }

.footer { color: var(--muted); text-align: center; padding: 2rem 0 3rem; }

/* 登录/注册页面 */
.auth-page { min-height: 100vh; display: grid; grid-template-rows: auto 1fr auto; }
.auth-wrapper { display: grid; place-items: center; padding: 2rem 1rem; }
.auth-card { width: min(420px, 92vw); background: rgba(11,17,32,.8); border: 1px solid var(--border); border-radius: 1rem; box-shadow: var(--shadow); padding: 1.2rem; }
.auth-title { margin: .2rem 0 1rem; }
.auth-form { display: grid; gap: .9rem; }
.form-group { display: grid; gap: .4rem; }
.form-group label { font-size: .95rem; color: var(--text); }
.form-group input[type="text"],
.form-group input[type="email"],
.form-group input[type="password"] {
  width: 100%; padding: .65rem .75rem; border-radius: .6rem; border: 1px solid var(--border); background: #0b1120; color: var(--text);
}
.form-group input:focus { outline: none; border-color: #334155; box-shadow: inset 0 0 0 1px #334155; }
.error { color: var(--danger); min-height: 1.1rem; font-size: .85rem; }
.password-field { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: .4rem; }
.btn-icon { border: 1px solid var(--border); background: #0b1120; color: var(--text); border-radius: .5rem; padding: .4rem .6rem; cursor: pointer; }
.checkbox { display: inline-flex; align-items: center; gap: .35rem; color: var(--muted); }
.form-row { display: flex; justify-content: space-between; align-items: center; }

/* 评分单选项：略增加行距与垂直间距，仅作用于评分组 */
#ratingGroup { row-gap: .6rem; }
#ratingGroup label { line-height: 1.8; }

/* 桌面端将筛选面板左移一些，避免过于靠中 */
@media (min-width: 901px) {
  .filters { margin-left: -8px; }
}

/* Responsive */
@media (max-width: 1100px) {
  .grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (max-width: 900px) {
  .container { grid-template-columns: 1fr; }
  .filters { order: 2; }
  .content { order: 1; }
}
@media (max-width: 720px) {
  .grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .search input { width: 100%; }
}
@media (max-width: 460px) {
  .grid { grid-template-columns: 1fr; }
}

/* 详情封面：保持统一纵横比，填充列宽且不溢出 */
#detailCover {
  display: block;
  width: 100%;
  height: 100%;
  aspect-ratio: 5 / 7;      /* 与占位封面比例一致，避免跳动 */
  object-fit: cover;         /* 过宽/过高时裁切以填满 */
  background: #0b1120;       /* 加载中背景 */
  border-right: 1px solid var(--border);
}

@media (max-width: 720px) {
  /* 小屏幕下让图片在上、文本在下时也能自适应高度 */
  #detailCover {
    aspect-ratio: 5 / 7;
    height: auto;            /* 确保在纵向布局时按宽度等比缩放 */
    max-width: 100%;
  }
}
